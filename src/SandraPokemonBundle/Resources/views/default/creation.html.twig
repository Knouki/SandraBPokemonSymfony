{% extends 'SandraPokemonBundle::base.html.twig' %}

{% block javascripts %}
    {{ parent() }}
<script>
    $(function() {
        $( "#zones, #selected-zones" ).sortable({
            connectWith: ".connectedZone"
        }).disableSelection();
    });

    $(function() {
        $( "#types, #selected-types" ).sortable({
            connectWith: ".connectedType"
        }).disableSelection();
    });

    $('body').on('click', '#submit-btn', function (e) {
        e.preventDefault();
        var selectedZones = $('#selected-zones');
        selectedZones.find('li').each(function(index) {
            var id = $(this).data('value');
            $('#pokemon_definition_zones option[value='+id+']').prop('selected', true)
        });
        var selectedEvolutions = $('#selected-evolutions');
        selectedEvolutions.find('li').each(function(index) {
            var id = $(this).data('value');
            $('#pokemon_definition_evolutions option[value='+id+']').prop('selected', true)
        })

        $('#pokemonForm').submit();
    });

</script>

{% endblock %}

{% block content_body %}
    <div class="row" style="margin: 10px;">
        <h1>Créateur de pokémon</h1>

        <div class="form-group">
            {{ form_label(pokemonForm.nom) }}
            {{ form_widget(pokemonForm.nom) }}
        </div>
        <div class="form-group">
            {{ form_label(pokemonForm.attaque) }}
            {{ form_widget(pokemonForm.attaque) }}
        </div>
        <div class="form-group">
            {{ form_label(pokemonForm.attaqueSpe) }}
            {{ form_widget(pokemonForm.attaqueSpe) }}
        </div>
        <div class="form-group">
            {{ form_label(pokemonForm.defence) }}
            {{ form_widget(pokemonForm.defence) }}
        </div>
        <div class="form-group">
            {{ form_label(pokemonForm.defenceSpe) }}
            {{ form_widget(pokemonForm.defenceSpe) }}
        </div>
        <div class="form-group">
            {{ form_label(pokemonForm.vitesse) }}
            {{ form_widget(pokemonForm.vitesse) }}
        </div>
        <div class="form-group">
            {{ form_label(pokemonForm.pv) }}
            {{ form_widget(pokemonForm.pv) }}
        </div>

        <div class="form-group col-md-12">
            {{ form_label(pokemonForm.idZones, "Zones") }}
            </br>

            <ul id="selected-zones" class="connectedZone col-md-6" style="height: 100px; border: solid 1px brown;">

            </ul>

                <div class="col-md-6" style="border: solid 1px brown;">
                    <ul id="zones" class="col-md-12 connectedZone">
                        {% for zone in zones %}
                            <li style="background-color: #B94A48; display:inline; color: white; width: 100px; margin: 4px;"
                                data-value="{{ zone.idZones }}">{{ zone.nom }}
                            </li>
                        {% endfor %}
                    </ul>

                </div>
        </div>

        <div class="form-group col-md-12">
            {{ form_label(pokemonForm.idTypes, "Types") }}
            </br>

            <ul id="selected-types" class="connectedType col-md-6" style="height: 100px; border: solid 1px burlywood;">

            </ul>

                <div class="col-md-6" style="border: solid 1px burlywood;">
                    <ul id="types" class="col-md-12 connectedType">
                        {% for type in types %}
                            <li style="background-color: burlywood; color: white; display:inline; width: 100px; margin: 4px;"
                                data-value="{{ type.idTypes }}">
                                {{ type.nom }}
                            </li>
                        {% endfor %}
                    </ul>

                </div>
        </div>

        <input type="submit" class="btn btn-default" value="Valider"/>
    </div>

{% endblock %}